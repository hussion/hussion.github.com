<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 3 | hussion</title>
  <meta name="author" content="hussion">
  
  <meta name="description" content="前端开发, Node.js, html, html5, css, css3, mongoDB, redis, SEO, java, struts, hibernate, spring, mybatis">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="hussion"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="hussion" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-43093196-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft top-title">
  <h1><a href="/">hussion</a></h1>
  <h2><a href="/">热爱前，后端开发，关注互联网，分享技术和生活</a></h2>
</div>
<nav id="main-nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2011-03-02T02:13:00.000Z"><a href="/2011/03/02/2012-05-05-linux6/">Mar 2nd, 2011</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2011/03/02/2012-05-05-linux6/">Secure CRT和Putty连接linux中文乱码问题</a></h1>
  

    </header>
    <div class="entry">
      
        <p>一开始我们用secure CRT和putty连接linux，发现中文都乱码了，实际上这是由于编码不一致引起的，当然了解决办法也很容易。</p>
<pre><code><figure class="highlight"><pre>secure CRT: 选项-&gt;会话选项-&gt;外观-&gt;字符编码-&gt;UTF-<span class="number">8</span>

putty: Change settings -&gt; Window-&gt;Translation-&gt;Remote character set: UTF-<span class="number">8</span> 
</pre></figure></code></pre>
<p>PS: 以上请确认默认的字体是否支持中文，不支持的话，换一个字体即可。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2011-02-23T08:58:00.000Z"><a href="/2011/02/23/2012-05-03-linux5/">Feb 23rd, 2011</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2011/02/23/2012-05-03-linux5/">linux学习笔记(五):文件搜索命令</a></h1>
  

    </header>
    <div class="entry">
      
        <ul>
<li>命令名称：<strong>which</strong>  <blockquote>
<p>功能描述：显示系统命令所在目录,并可以提供命令的别名信息  </p>
<figure class="highlight lang-ruby"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
</pre></td><td class="code"><pre>语法： which [命令名称].
```   
&lt;!--more--&gt;  
* 命令名称：**whereis**  
&gt; 功能描述：显示系统命令所在目录,并可以提供命令的帮助文件信息  
``` ruby
语法： whereis [命令名称].
``` 

* 命令名称：**find**  
&gt; 功能描述：查找文件或目录  
 
``` java    
语法： find [搜索路径] [参数] [搜索关键字]     
/*  
  *常用参数列表  
  */  
-name //根据名字查找（可以用通配符 * 和 ? ）  
-size //根据文件大小查找(根据数据块block计算，大于用+表示，小于用-表示，等于用=表示)   
find /etc -size +204800   //查找大于100MB的文件(因为数据块大小512字节=0.5kb)  
-type //根据文件类型进行查找（-f&lt;二进制文件&gt;，-d&lt;目录&gt;，-l&lt;链接文件&gt;）  
-user //根据用户查找  
-inum 根据i节点查找  
-[cam]time //根据时间查找(time代表天,c=change&lt;属性被修改过&gt;,a=access&lt;被访问过&gt;,m=modify&lt;内容被修改过&gt;,后面跟时间的时候+，-，=代表范围)  
-[cam]min //根据时间查找(min代表分钟)  
/*  
给查询加连接符 “-a(and)和-o(or)”  
*/  
find /etc -size +123 -a -size -456 //代表查找大小在123和456之间的文件  
/*  
*给查询增加执行→ find /etc -name xxx -exec 命令 {} /;  
*"{}"是前面查到的结果，"/"代表转义，使用命令本身含义，";"代表结果&lt;类似某些编程语言的结束&gt;)  
*/  
find /etc -name xxx -exec ls -l {} /; 查找名为xxx的文件，并查看详细信息(exec=execute&lt;直接执行&gt;)  
find /etc -name xxx -ok ls -l {} /; 查找文件并询问是否执行？  
find /etc -inum xxx -exec rm -rf {} /; 根据i节点查找文件并删除  
```

* 命令名称：**locate**  
&gt; 功能描述：查找文件或目录  
 
``` java   
语法： locate [搜索关键字]    
 /* 该命令是从系统安装或者更新的数据库里面去查找，所以查找速度特别快，但是  
  * 该数据库系统默认是定期更新的，所以你查找前如果没有更新数据库，那么可能  
 * 好多文件查不到  所以可以配合 updatedb(更新数据库) 命令进行查找  
*/
```  

* 命令名称：**grep**  
&gt; 功能描述：在文件中搜寻字符串匹配的行并输出  
 
```     
语法： grep [指定字符串] [源文件]
```

* 命令名称：**updatedb**  
&gt; 功能描述：建立整个系统目录文件的数据库  
 
```     
语法： updatedb
```

* 命令名称：**man**  
&gt; 功能描述：获得帮助信息(既可以获得命令的帮助，又可以获得配置文件的帮助)  
 
``` ruby      
语法： man [命令名称] 和 man [配置文件名]  
 #如果想要查找的配置文件名和命令名相同，那么默认会显示命令帮助信息  
 #如果想获得配置文件信息，那么可以这么写： 例↓  
man 5 passwd (#默认是man 1 passwd，所以会默认显示命令的帮助信息，)  
5 和 1 分别代表查看配置文件的帮助和查看命令的帮助。
```  

* 命令名称：**info**  
&gt; 功能描述：获得帮助信息(用法和man基本一样)  
 
```     
语法： info [命令名称] 和 info [配置文件名]
```

* 命令名称：**whatis, apropos, makewhatis**  
&gt; 功能描述：获取索引的简短说明信息  
 
```     
语法：whatis [任何关键字] 和 apropos [任何关键字]  
 #两者区别  
apropos：使用关键字以模糊比对的方式查询资料库，然后将结果输出(宽松)，相当与man -k 命令  
whatis：只输出完全符合关键字的信息(完全符合)，相当于man - f 命令 
makewhatis #是whatis和apropos搜索使用的数据库，当使用这两个命令发生错误时，就是whatis database 没有建立
</pre></td></tr></table></figure>

</blockquote>
</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2011-02-15T04:02:00.000Z"><a href="/2011/02/15/2011-02-15-linux4/">Feb 15th, 2011</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2011/02/15/2011-02-15-linux4/">linux学习笔记(四):权限管理命令</a></h1>
  

    </header>
    <div class="entry">
      
        <ul>
<li>命令：<strong>chmod</strong>  <blockquote>
<p>功能描述：改变文件或目录权限</p>
</blockquote>
</li>
</ul>
<pre><code class="lang-ruby"><figure class="highlight lang-ruby"><pre>  <span class="comment">#语法  </span>
<span class="variable">$ </span>chmod [{ugo}{+-=}{rwx}] [文件或者目录]  
<span class="symbol">r:</span> <span class="number">4</span>, <span class="symbol">w:</span> <span class="number">2</span>, <span class="symbol">x:</span> <span class="number">1</span>  
<span class="variable">$ </span>chmod [mode=<span class="number">421</span>] [文件或者目录]  
 <span class="comment">#例  </span>
<span class="variable">$ </span>chmod <span class="number">777</span> [file1] <span class="comment">#把file1所有用户的权限设为rwx</span>
</pre></figure></code></pre>

      
    </div>
    <footer>
      
        
          <div class="alignleft readMore">
            <a href="/2011/02/15/2011-02-15-linux4/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2011-02-08T00:06:00.000Z"><a href="/2011/02/08/2011-02-08-linux3/">Feb 8th, 2011</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2011/02/08/2011-02-08-linux3/">linux学习笔记(三):文件处理命令</a></h1>
  

    </header>
    <div class="entry">
      
        <ul>
<li>命令名称: <strong>ls</strong>  <blockquote>
<p>命令英文原意： list<br>命令所在路径： /bin/ls<br>执行权限： 所有用户<br>功能描述： 显示目录文件及其信息</p>
</blockquote>
</li>
</ul>
<figure class="highlight lang-ruby"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
</pre></td><td class="code"><pre> <span class="comment">#语法：  </span>
ls 选项[-ald] [文件或目录]  
-a <span class="comment">#显示所有文件，包括隐藏文件  </span>
-l <span class="comment">#详细信息显示  </span>
-d <span class="comment">#查看目录属性  </span>
-i <span class="comment">#显示文件或者目录的i节点信息  </span>
```  
&lt;!--more--&gt;  
  
* 命令名称<span class="symbol">:</span> **cd**  
&gt; 命令英文原意： change directory  
&gt; 命令所在路径： shell内置命令  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 切换目录
    
``` ruby   
 <span class="comment">#语法：  </span>
cd [目录]  
 <span class="comment">#例：   </span>
<span class="variable">$ </span>cd / <span class="comment">#切换到根目录   </span>
<span class="variable">$ </span>cd .. <span class="comment">#回到上级目录  </span>
```  
  
* 命令名称<span class="symbol">:</span> **pwd**      
&gt; 命令英文原意： print working directory  
&gt; 命令所在路径： /bin/pwd  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 显示当前所在的工作目录
    
``` ruby   
 <span class="comment">#语法：  </span>
<span class="variable">$ </span>pwd    
```  
  
* 命令名称<span class="symbol">:</span> **touch**      
&gt; 命令所在路径： /bin/touch  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 创建空文件
    
``` ruby   
 <span class="comment">#语法：  </span>
<span class="variable">$ </span>touch [文件名]    
```
  
* 命令名称<span class="symbol">:</span> **mkdir** 
&gt; 命令英文原意： make directories     
&gt; 命令所在路径： /bin/mkdir  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 创建新目录
    
``` ruby   
 <span class="comment">#语法：  </span>
<span class="variable">$ </span>mkdir [目录名]    
```
  
* 命令名称<span class="symbol">:</span> **cp** 
&gt; 命令英文原意： copy     
&gt; 命令所在路径： /bin/cp  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 复制文件或目录
    
``` ruby   
 <span class="comment">#语法：  </span>
<span class="variable">$ </span>cp [源文件] [目的目录] <span class="comment">#复制文件到目的目录  </span>
 <span class="comment">#可以同时复制多个文件  </span>
<span class="variable">$ </span>cp file1 file2 dir1  
<span class="variable">$ </span>cp -r [源目录] [目的目录] <span class="comment">#复制目录到目的目录   </span>
<span class="variable">$ </span>cp -r dir1 dir2 <span class="comment">#将dir1下的所有文件及子目录复制到dir2 </span>
<span class="variable">$ </span>cp -p <span class="comment">#不改变文件的创建或者修改时间进行复制  </span>
```
  
* 命令名称<span class="symbol">:</span> **mv** 
&gt; 命令英文原意： move     
&gt; 命令所在路径： /bin/move  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 移动文件或目录、更名
    
``` ruby   
 <span class="comment">#语法：  </span>
<span class="variable">$ </span>mv file1 file2 <span class="comment">#把file1更名为file2(file1和file2同目录)  </span>
<span class="variable">$ </span>mv [源文件或目录] [目的目录] <span class="comment">#移动文件或目录到目的目录  </span>
<span class="variable">$ </span>mv file1 file2 dir1 <span class="comment">#移动多个文件   </span>
<span class="variable">$ </span>mv -f [源目录或文件] [目的目录] <span class="comment">#强制移动目录或文件到目的目录      </span>
```
  
* 命令名称<span class="symbol">:</span> **rm** 
&gt; 命令英文原意： remove     
&gt; 命令所在路径： /bin/rm  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 删除文件或目录
    
``` ruby   
 <span class="comment">#语法：    </span>
<span class="variable">$ </span>rm [-irf] [源文件或目录]  
-i <span class="comment">#进行交互式删除  </span>
-r <span class="comment">#将参数中列出的全部目录和子目录均递归地删除  </span>
-f <span class="comment">#忽略不存在的文件，从不给出提示</span>
```
  
* 命令名称<span class="symbol">:</span> **cat** 
&gt; 命令英文原意： concatenate <span class="keyword">and</span> display files     
&gt; 命令所在路径： /bin/cat  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 显示文件内容(只能显示一页)
    
``` ruby   
 <span class="comment">#语法：    </span>
<span class="variable">$ </span>cat [文件]
<span class="variable">$ </span>cat [file1] [file2] <span class="comment">#合并显示多个文件  </span>
```
  
* 命令名称<span class="symbol">:</span> **more** 
&gt; 命令所在路径： /bin/more  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 分页显示文件内容
    
``` ruby   
 <span class="comment">#语法：    </span>
<span class="variable">$ </span>more [文件]  
 <span class="comment">#按键盘空格或f显示下一页，Enter显示下一行，q或Q退出</span>
```
  
* 命令名称<span class="symbol">:</span> **less** 
&gt; 命令所在路径： /bin/less  
&gt; 执行权限： 所有用户  
&gt; 功能描述： 分页显示文件内容
    
``` ruby   
 <span class="comment">#语法：    </span>
<span class="variable">$ </span>less [文件]  
 <span class="comment">#按键盘空格或f显示下一页，Enter显示下一行，q或Q退出  </span>
 和more命令相比，还可以用↑ 和 ↓ 来显示内容
```  
  
* 命令名称<span class="symbol">:</span> **head** 
&gt; 命令所在路径： /bin/head   
&gt; 执行权限： 所有用户  
&gt; 功能描述： 显示文件前几行内容
    
``` ruby   
 <span class="comment">#语法：    </span>
<span class="variable">$ </span>head -num [文件] <span class="comment">#-num，显示文件的前num行  </span>
```
  
* 命令名称<span class="symbol">:</span> **tail** 
&gt; 命令所在路径： /bin/tail   
&gt; 执行权限： 所有用户  
&gt; 功能描述： 显示文件后几行内容
    
``` ruby   
 <span class="comment">#语法：    </span>
<span class="variable">$ </span>tail -num [文件] <span class="comment">#-num，显示文件的后num行  </span>
<span class="variable">$ </span>tali -f [文件] <span class="comment"># 动态显示文件内容(只要文件内容发生变化，就会动态显示出来) </span>
```
  
* 命令名称<span class="symbol">:</span> **ln** 
&gt; 命令英文原意： link  
&gt; 命令所在路径： /bin/ln   
&gt; 执行权限： 所有用户  
&gt; 功能描述： 创建链接文件
    
``` ruby   
 <span class="comment">#语法：    </span>
<span class="variable">$ </span>ln [源文件] [目标文件] <span class="comment">#创建硬链接文件  </span>
<span class="variable">$ </span>ln -s [源文件] [目标文件] <span class="comment">#创建软链接文件  </span>
两者区别：  
 /*  
  软链接权限都是rwxrwxrwx的, --&gt; <span class="number">10</span> 数字代表时间值  
  类似于windows的快捷方式，可以跨文件系统生成，源文件删除，软链接不能继续使用了。  
  硬链接相当于不改变时间的对文件的拷贝(cp -p) + 同步更新，与源文件有相同的inode，  
  不能跨文件系统生成，不能对目录创建硬链接，源文件删除，硬链接文件还可以继续使用，  
  因为他相当于是对源文件的拷贝。 
  硬链接文件是同步更新的(源文件发生变化，硬链接文件也同步变化)！！！   
 *<span class="regexp">/
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2011-02-03T03:17:00.000Z"><a href="/2011/02/03/2012-02-03-linux2/">Feb 3rd, 2011</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2011/02/03/2012-02-03-linux2/">linux学习笔记(二):命令格式和命令分类</a></h1>
  

    </header>
    <div class="entry">
      
        <h5>命令格式：</h5>
<pre><code class="lang-ruby"><figure class="highlight lang-ruby"><pre>命令 -选项 参数  
 <span class="comment">#例如  </span>
ls -l -a /etc  
如果有多个选项，可以写在一起  
ls -la /etc <span class="comment">#和上面写法是等价的</span>
</pre></figure></code></pre>
<h5>命令分类</h5>
<blockquote>
<p>文件处理命令<br>权限管理命令<br>文件搜索命令<br>帮助命令<br>压缩解压命令<br>网络通信命令<br>...  </p>
</blockquote>
<p>常用简单命令：</p>
<pre><code><figure class="highlight"><pre><span class="title">who</span>： 列出所有正在使用系统的用户、所用终端名和注册到系统的时间
<span class="title">who</span> am i： 列出使用该命令的当前用户的相关信息
<span class="title">echo</span>： 将命令行中的参数显示到标准输出(即屏幕)上
<span class="title">date</span>： 显示或设置系统的日期和时间
<span class="title">cal</span>： 显示日历(cal <span class="number">2011</span>&lt;显示<span class="number">2011</span>全年日历&gt;，cal <span class="number">02</span> <span class="number">2011</span>&lt;显示<span class="number">2011</span>年<span class="number">2</span>月日历&gt;)
<span class="title">clear</span>： 清除屏幕上的信息
<span class="title">adduser</span>: 添加用户
<span class="title">passwd</span>: 修改密码
</pre></figure></code></pre>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2011-02-03T02:17:00.000Z"><a href="/2011/02/03/2011-02-03-linux/">Feb 3rd, 2011</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2011/02/03/2011-02-03-linux/">linux学习笔记(一):文件命名规则</a></h1>
  

    </header>
    <div class="entry">
      
        <ol>
<li>除了 / 之外，所有的字符都合法</li>
<li>有些字符最好不要用，如空格符、制表符、退格符和字符@ # $ &amp; () - 等</li>
<li>避免使用 . 作为普通文件名的第一个字符(在linux中以.开头的代表隐藏文件)</li>
<li>要注意大小写(在linux中，大小写敏感)</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2010-08-23T00:24:00.000Z"><a href="/2010/08/23/2012-06-23-hibernate-4/">Aug 23rd, 2010</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2010/08/23/2012-06-23-hibernate-4/">hibernate的数据关联映射</a></h1>
  

    </header>
    <div class="entry">
      
        <p>数据关联映射分为：一对多、多对一，一对一，多对多。  </p>
<p><strong>一对多、多对一</strong>  </p>
<pre><code><figure class="highlight"><pre><span class="comment">t_address</span>             <span class="comment">t_user</span>
<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>
<span class="comment">id</span>                    <span class="comment">id</span>
<span class="comment">address</span>               <span class="comment">name</span>
<span class="comment">userid(FK)</span>            <span class="comment">age</span>
<span class="comment">tel
</pre></figure></code></pre>
<figure class="highlight lang-java"><figcaption><span>一对多、多对一持久化类设计 </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
</pre></td><td class="code"><pre><span class="comment">// User类</span>
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> {</span> 
 
<span class="keyword">private</span> <span class="keyword">int</span> id; 
<span class="keyword">private</span> String name; 
<span class="keyword">private</span> <span class="keyword">int</span> age; 
<span class="keyword">private</span> Set&lt;Address&gt; addressSet; 
 
<span class="comment">//get set method </span>
}

<span class="comment">//Address类</span>
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> {</span> 
 
<span class="keyword">private</span> <span class="keyword">int</span> id; 
<span class="keyword">private</span> String address; 
<span class="keyword">private</span> <span class="keyword">int</span> tel; 
<span class="keyword">private</span> User user; 
 
<span class="comment">//get set method </span>
}
```  
``` xml user.hbm.xml 
&lt;hibernate-mapping <span class="keyword">package</span>=<span class="string">"com.hussion.pojo"</span>&gt;  
	&lt;<span class="class"><span class="keyword">class</span> <span class="title">name</span>="<span class="title">User</span>" <span class="title">table</span>="<span class="title">t_user</span>"&gt; 
		&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>" <span class="title">column</span>="<span class="title">id</span>"&gt; 
		  &lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">native</span>"&gt;&lt;/<span class="title">generator</span>&gt; 
		&lt;/<span class="title">id</span>&gt; 
		&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">name</span>" <span class="title">column</span>="<span class="title">name</span>"&gt;&lt;/<span class="title">property</span>&gt; 
		&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">age</span>" <span class="title">column</span>="<span class="title">age</span>"&gt;&lt;/<span class="title">property</span>&gt; 

		&lt;!--<span class="title">inverse</span>="<span class="title">true</span>"放弃关系维护--&gt; 
		&lt;<span class="title">set</span> <span class="title">name</span>="<span class="title">addressSet</span>" <span class="title">inverse</span>="<span class="title">true</span>"&gt; 
		  &lt;<span class="title">key</span> <span class="title">column</span>="<span class="title">userid</span>"/&gt; 
		  &lt;<span class="title">one</span>-<span class="title">to</span>-<span class="title">many</span> <span class="title">class</span>="<span class="title">Address</span>"/&gt; 
		&lt;/<span class="title">set</span>&gt; 
	&lt;/<span class="title">class</span>&gt;  
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
```  
``` <span class="title">xml</span> <span class="title">address</span>.<span class="title">hbm</span>.<span class="title">xml</span> 
&lt;<span class="title">hibernate</span>-<span class="title">mapping</span> <span class="title">package</span>="<span class="title">com</span>.<span class="title">hussion</span>.<span class="title">pojo</span>"&gt; 
	&lt;<span class="title">class</span> <span class="title">name</span>="<span class="title">Address</span>" <span class="title">table</span>="<span class="title">t_address</span>"&gt; 
		&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>"&gt; 
		  &lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">native</span>"/&gt; 
		&lt;/<span class="title">id</span>&gt; 
		&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">address</span>"&gt;&lt;/<span class="title">property</span>&gt; 
		&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">tel</span>"&gt;&lt;/<span class="title">property</span>&gt; 
		&lt;<span class="title">many</span>-<span class="title">to</span>-<span class="title">one</span> <span class="title">name</span>="<span class="title">user</span>" <span class="title">class</span>="<span class="title">User</span>" <span class="title">column</span>="<span class="title">userid</span>"/&gt; 
	&lt;/<span class="title">class</span>&gt; 
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
```  
``` <span class="title">java</span> 测试 
<span class="title">User</span> <span class="title">user</span> = <span class="title">new</span> <span class="title">User</span>(); 
<span class="title">user</span>.<span class="title">setName</span>("<span class="title">tom</span>"); 
<span class="title">user</span>.<span class="title">setAge</span>(21); 
 
<span class="title">Address</span> <span class="title">address1</span> = <span class="title">new</span> <span class="title">Address</span>(); 
<span class="title">address1</span>.<span class="title">setAddress</span>("<span class="title">China</span>"); 
<span class="title">address1</span>.<span class="title">setTel</span>("010-9999999"); 
 
<span class="title">Address</span> <span class="title">address2</span> = <span class="title">new</span> <span class="title">Address</span>(); 
<span class="title">address2</span>.<span class="title">setAddress</span>("<span class="title">USA</span>"); 
<span class="title">address2</span>.<span class="title">setTel</span>("89898989"); 
 
<span class="title">Set</span>&lt;<span class="title">Address</span>&gt; <span class="title">set</span> = <span class="title">new</span> <span class="title">HashSet</span>&lt;<span class="title">Address</span>&gt;(); 
<span class="title">set</span>.<span class="title">add</span>(<span class="title">address2</span>); 
<span class="title">set</span>.<span class="title">add</span>(<span class="title">address1</span>); 
 
<span class="title">user</span>.<span class="title">setAddressSet</span>(<span class="title">set</span>);
<span class="title">session</span>.<span class="title">beginTransaction</span>(); 
 
<span class="title">session</span>.<span class="title">save</span>(<span class="title">address1</span>); 
<span class="title">session</span>.<span class="title">save</span>(<span class="title">address2</span>); 
<span class="title">session</span>.<span class="title">save</span>(<span class="title">user</span>); 
 
<span class="title">session</span>.<span class="title">getTransaction</span>().<span class="title">commit</span>();
```  

**一对一**  

	<span class="title">t_person</span>                        <span class="title">t_card</span>
	---------------------------------------
	<span class="title">id</span>                              <span class="title">id</span>(<span class="title">Fk</span>)
	<span class="title">name</span>                            <span class="title">cardnum</span>
``` <span class="title">java</span> 持久化类设计 
<span class="title">public</span> <span class="title">class</span> <span class="title">Person</span> {</span> 
 
<span class="keyword">private</span> <span class="keyword">int</span> id; 
<span class="keyword">private</span> String userName; 
<span class="keyword">private</span> Card card; 
 
<span class="comment">//get set Method </span>
} 

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Card</span> {</span> 
 
<span class="keyword">private</span> <span class="keyword">int</span> id; 
<span class="keyword">private</span> String cardNum; 
<span class="keyword">private</span> Person person; 
 
<span class="comment">//get set Method </span>
} 
```  
``` xml person.hbm.xml 
&lt;hibernate-mapping <span class="keyword">package</span>=<span class="string">"com.hussion.pojo"</span>&gt; 
    &lt;<span class="class"><span class="keyword">class</span> <span class="title">name</span>="<span class="title">Person</span>" <span class="title">table</span>="<span class="title">t_person</span>"&gt; 
    	&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>"&gt; 
	      &lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">native</span>"&gt;&lt;/<span class="title">generator</span>&gt; 
	    &lt;/<span class="title">id</span>&gt; 
     	&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">userName</span>"&gt;&lt;/<span class="title">property</span>&gt; 
      	&lt;<span class="title">one</span>-<span class="title">to</span>-<span class="title">one</span> <span class="title">name</span>="<span class="title">card</span>" <span class="title">class</span>="<span class="title">Card</span>" <span class="title">cascade</span>="<span class="title">delete</span>"/&gt;
    &lt;/<span class="title">class</span>&gt; 
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
```  
<span class="title">cascade</span>属性 
• `<span class="title">save</span>-<span class="title">update</span>`：在执行保存和修改是进行级联操作   
• `<span class="title">delete</span>`：在执行删除时进行级联操作   
• `<span class="title">all</span>`：在所有情况下进行级联操作    
• `<span class="title">none</span>`：不进行级联操作（默认）  
``` <span class="title">xml</span> <span class="title">card</span>.<span class="title">hbm</span>.<span class="title">xml</span> 
&lt;<span class="title">hibernate</span>-<span class="title">mapping</span> <span class="title">package</span>="<span class="title">com</span>.<span class="title">hussion</span>.<span class="title">pojo</span>"&gt; 
	&lt;<span class="title">class</span> <span class="title">name</span>="<span class="title">Card</span>" <span class="title">table</span>="<span class="title">t_card</span>"&gt; 
		&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>" <span class="title">column</span>="<span class="title">id</span>"&gt; 
			&lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">foreign</span>"&gt; 
			  &lt;<span class="title">param</span> <span class="title">name</span>="<span class="title">property</span>"&gt;<span class="title">person</span>&lt;/<span class="title">param</span>&gt; 
			&lt;/<span class="title">generator</span>&gt; 
		&lt;/<span class="title">id</span>&gt; 
		&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">cardNum</span>"&gt;&lt;/<span class="title">property</span>&gt; 
		&lt;<span class="title">one</span>-<span class="title">to</span>-<span class="title">one</span> <span class="title">name</span>="<span class="title">person</span>" <span class="title">class</span>="<span class="title">Person</span>"&gt;&lt;/<span class="title">one</span>-<span class="title">to</span>-<span class="title">one</span>&gt; 
	&lt;/<span class="title">class</span>&gt; 
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
```  
**一对一（唯一外键关联）**  

	<span class="title">t_person</span>                 <span class="title">t_card</span>
	---------------------------------
	<span class="title">id</span>                       <span class="title">id</span>
	<span class="title">name</span>                     <span class="title">cardnum</span>
	<span class="title">cardid</span>(<span class="title">FK</span>)               <span class="title">personid</span>(<span class="title">FK</span>)
``` <span class="title">xml</span> <span class="title">person</span>.<span class="title">hbm</span>.<span class="title">xml</span> 
&lt;<span class="title">hibernate</span>-<span class="title">mapping</span> <span class="title">package</span>="<span class="title">com</span>.<span class="title">hussion</span>.<span class="title">pojo</span>"&gt; 
    &lt;<span class="title">class</span> <span class="title">name</span>="<span class="title">Person</span>" <span class="title">table</span>="<span class="title">t_person</span>"&gt; 
    	&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>"&gt; 
	      &lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">native</span>"&gt;&lt;/<span class="title">generator</span>&gt; 
	    &lt;/<span class="title">id</span>&gt; 
	    &lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">userName</span>"&gt;&lt;/<span class="title">property</span>&gt; 
	  	&lt;<span class="title">many</span>-<span class="title">to</span>-<span class="title">one</span> <span class="title">name</span>="<span class="title">card</span>" <span class="title">column</span>="<span class="title">cardid</span>" <span class="title">class</span>="<span class="title">Card</span>"  
	    <span class="title">cascade</span>="<span class="title">delete</span>" <span class="title">unique</span>="<span class="title">true</span>"/&gt; 
    &lt;/<span class="title">class</span>&gt; 
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
```  
``` <span class="title">xml</span> <span class="title">card</span>.<span class="title">hbm</span>.<span class="title">xml</span> 
&lt;<span class="title">hibernate</span>-<span class="title">mapping</span> <span class="title">package</span>="<span class="title">com</span>.<span class="title">hussion</span>.<span class="title">pojo</span>"&gt; 
	&lt;<span class="title">class</span> <span class="title">name</span>="<span class="title">Card</span>" <span class="title">table</span>="<span class="title">t_card</span>"&gt; 
		&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>" <span class="title">column</span>="<span class="title">id</span>"&gt; 
		  &lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">native</span>"&gt;&lt;/<span class="title">generator</span>&gt; 
		&lt;/<span class="title">id</span>&gt; 
		&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">cardNum</span>"&gt;&lt;/<span class="title">property</span>&gt; 
		&lt;<span class="title">many</span>-<span class="title">to</span>-<span class="title">one</span> <span class="title">name</span>="<span class="title">person</span>" <span class="title">class</span>="<span class="title">Person</span>" <span class="title">column</span>="<span class="title">personid</span>" <span class="title">unique</span>="<span class="title">true</span>“/&gt; 
	&lt;/<span class="title">class</span>&gt; 
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
```  

**多对多**  

	<span class="title">t_student</span>         <span class="title">t_student_teacher</span>           <span class="title">t_teacher</span>
	-------------------------------------------------------
	<span class="title">id</span>                <span class="title">id</span>                          <span class="title">id</span>
	<span class="title">name</span>              <span class="title">studentid</span>(<span class="title">FK</span>)                   <span class="title">name</span>
					  <span class="title">teacherid</span>(<span class="title">FK</span>)
``` <span class="title">java</span> 持久化类设计 
<span class="title">public</span> <span class="title">class</span> <span class="title">Teacher</span> {</span> 
 
<span class="keyword">private</span> <span class="keyword">int</span> id; 
<span class="keyword">private</span> String name; 
<span class="keyword">private</span> Set&lt;Student&gt; student; 
 
<span class="comment">//get set method </span>
} 
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> {</span> 
 
<span class="keyword">private</span> <span class="keyword">int</span> id; 
<span class="keyword">private</span> String name; 
<span class="keyword">private</span> Set&lt;Teacher&gt; teacher; 
 
<span class="comment">//get set method </span>
}
```  
``` xml teacher.hbm.xml 
&lt;hibernate-mapping <span class="keyword">package</span>=<span class="string">"com.hussion.pojo"</span>&gt; 
	&lt;<span class="class"><span class="keyword">class</span> <span class="title">name</span>="<span class="title">Teacher</span>" <span class="title">table</span>="<span class="title">t_teacher</span>"&gt; 
		&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>" <span class="title">column</span>="<span class="title">id</span>"&gt; 
		  &lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">native</span>"&gt;&lt;/<span class="title">generator</span>&gt; 
		&lt;/<span class="title">id</span>&gt; 
		  &lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">name</span>"&gt;&lt;/<span class="title">property</span>&gt; 
		&lt;<span class="title">set</span> <span class="title">name</span>="<span class="title">student</span>" <span class="title">table</span>="<span class="title">t_student_techer</span>"&gt; 
		  &lt;<span class="title">key</span> <span class="title">column</span>="<span class="title">teacherid</span>"/&gt; 
		  &lt;<span class="title">many</span>-<span class="title">to</span>-<span class="title">many</span> <span class="title">class</span>=“<span class="title">Student</span>” <span class="title">column</span>=“<span class="title">studentid</span>”/&gt; 
		&lt;/<span class="title">set</span>&gt; 
	&lt;/<span class="title">class</span>&gt; 
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
```
``` <span class="title">xml</span> <span class="title">student</span>.<span class="title">hbm</span>.<span class="title">xml</span> 
&lt;<span class="title">hibernate</span>-<span class="title">mapping</span> <span class="title">package</span>="<span class="title">com</span>.<span class="title">hussion</span>.<span class="title">pojo</span>"&gt; 
	&lt;<span class="title">class</span> <span class="title">name</span>="<span class="title">Student</span>" <span class="title">table</span>="<span class="title">t_student</span>"&gt; 
		&lt;<span class="title">id</span> <span class="title">name</span>="<span class="title">id</span>" <span class="title">column</span>="<span class="title">id</span>"&gt; 
		  &lt;<span class="title">generator</span> <span class="title">class</span>="<span class="title">native</span>"&gt;&lt;/<span class="title">generator</span>&gt; 
		&lt;/<span class="title">id</span>&gt; 
		&lt;<span class="title">property</span> <span class="title">name</span>="<span class="title">name</span>"&gt;&lt;/<span class="title">property</span>&gt; 
		&lt;<span class="title">set</span> <span class="title">name</span>="<span class="title">teacher</span>" <span class="title">table</span>="<span class="title">t_student_techer</span>"&gt; 
			&lt;<span class="title">key</span> <span class="title">column</span>="<span class="title">studentid</span>"/&gt; 
			&lt;<span class="title">many</span>-<span class="title">to</span>-<span class="title">many</span> <span class="title">class</span>="<span class="title">Teacher</span>" <span class="title">column</span>="<span class="title">teacherid</span>"/&gt; 
		&lt;/<span class="title">set</span>&gt; 
	&lt;/<span class="title">class</span>&gt; 
&lt;/<span class="title">hibernate</span>-<span class="title">mapping</span>&gt;
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2010-08-11T23:38:00.000Z"><a href="/2010/08/12/2012-06-20-hibernate-3/">Aug 12th, 2010</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2010/08/12/2012-06-20-hibernate-3/">hibernate的查询方式</a></h1>
  

    </header>
    <div class="entry">
      
        <p>hibernate的查询方式常见的主要分为三种: HQL, QBC, 以及使用原生SQL查询  </p>
<p><strong>HQL查询</strong>  </p>
<p>• HQL（Hibernate Query Language）提供了丰富灵活的查询方式，使用HQL进行查询也是Hibernate官方推荐使用的查询方式。 </p>
<p>• HQL在语法结构上和SQL语句十分的相同，所以可以很快的上手进行使用。使用HQL需要用到Hibernate中的Query对象，该对象专门执行HQL方式的操作。  </p>
<figure class="highlight lang-java"><figcaption><span>查询所有示例 </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
</pre></td><td class="code"><pre>session.beginTransaction(); 
String hql = <span class="string">"from User"</span>; <span class="comment">// from 后跟的是要查询的对象，而不是表</span>
Query query = session.createQuery(hql); 
List&lt;User&gt; userList = query.list(); 
<span class="keyword">for</span>(User user:userList){ 
  System.out.println(user.getUserName()); 
} 
session.getTransaction().commit();
```  
``` java 带where的查询示例 
session.beginTransaction(); 
String hql = <span class="string">"from User where userName = 'James'"</span>; 
Query query = session.createQuery(hql); 
List&lt;User&gt; userList = query.list(); 
<span class="keyword">for</span>(User user:userList){ 
  System.out.println(user.getUserName()); 
} 
session.getTransaction().commit(); 

<span class="comment">/*
	在HQL中where语句中使用的是持久化对象的属性名，如上面示例中的userName。当然在HQL中也可以使用别名
*/</span>

String hql = <span class="string">"from User as u where u.userName = 'James'"</span>; 

<span class="comment">/*
过滤条件 
在where语句中还可以使用各种过滤条件，如：=、&lt;&gt;、&lt;、&gt;、&gt;=、&lt;=、between、not between、
in、not in、is、like、and、or等
*/</span>
``` 
``` java 获取一个不完整的对象 
session.beginTransaction(); 
String hql = <span class="string">"select userName from User"</span>; 
Query query = session.createQuery(hql); 
List nameList = query.list(); 
<span class="keyword">for</span>(Object obj:nameList){ 
  System.out.println(obj); 
} 
session.getTransaction().commit();

<span class="comment">// 多个属性的话，需要用object[]接收</span>

session.beginTransaction(); 
String hql = <span class="string">"select userName,userPwd from User"</span>; 
Query query = session.createQuery(hql); 
List nameList = query.list(); 

<span class="keyword">for</span>(Object obj:nameList){ 
	Object[] array = (Object[]) obj; <span class="comment">// 转成object[]</span>
	System.out.println(<span class="string">"name:"</span> + array[<span class="number">0</span>]); 
	System.out.println(<span class="string">"pwd:"</span> + array[<span class="number">1</span>]); 
} 
session.getTransaction().commit();
``` 
``` java 统计和分组查询 
session.beginTransaction(); 
String hql = <span class="string">"select count(*),max(id) from User"</span>; 
Query query = session.createQuery(hql); 
List nameList = query.list(); 
<span class="keyword">for</span>(Object obj:nameList){ 
	Object[] array = (Object[]) obj; 
	System.out.println(<span class="string">"count:"</span> + array[<span class="number">0</span>]); 
	System.out.println(<span class="string">"max:"</span> + array[<span class="number">1</span>]); 
} 
session.getTransaction().commit();

<span class="comment">/*  
	该条sql语句返回的是单条数据，所以还可以这样写
	单列数据用Object，多列数据用Object[]
*/</span>

Object[] object = (Object[]) query.uniqueResult();
System.out.println(<span class="string">"count:"</span> + object[<span class="number">0</span>]); 
System.out.println(<span class="string">"max:"</span> + object[<span class="number">1</span>]);
```  
``` java 更多写法 
select distinct name from Student; 
 
select max(age) from Student; 
 
select count(age),age from Student group by age; 
 
from Student order by age;
```  
``` java HQL占位符 
session.beginTransaction(); 
String hql = <span class="string">"from User where userName = ?"</span>; 
Query query = session.createQuery(hql); 
<span class="comment">// 索引从0开始 </span>
query.setString(<span class="number">0</span>, <span class="string">"James"</span>); 
 
List&lt;User&gt; userList = query.list(); 
 
<span class="keyword">for</span>(User user:userList){ 
  System.out.println(user.getUserName()); 
} 
session.getTransaction().commit();
```  
``` java HQL引用占位符 
session.beginTransaction(); 
String hql = <span class="string">"from User where userName = :name"</span>; 
Query query = session.createQuery(hql); 
 
query.setParameter(<span class="string">"name"</span>, <span class="string">"James"</span>); 
 
List&lt;User&gt; userList = query.list(); 
 
<span class="keyword">for</span>(User user:userList){ 
  System.out.println(user.getUserName()); 
} 
 
session.getTransaction().commit();
```
``` java HQL分页 
session.beginTransaction(); 
String hql = <span class="string">"from User"</span>; 
Query query = session.createQuery(hql); 
 
query.setFirstResult(<span class="number">0</span>); 
query.setMaxResults(<span class="number">2</span>); 
 
List&lt;User&gt; userList = query.list(); 
<span class="keyword">for</span>(User user:userList){ 
  System.out.println(user.getUserName()); 
} 
session.getTransaction().commit();
```  

**QBC（Query By Criteria）查询**  

• Criteria对象提供了一种面向对象的方式查询数据库。Criteria对象需要使用Session对象来获得。 
 
• 一个Criteria对象表示对一个持久化类的查询。
``` java 查询所有 
session.beginTransaction(); 
 
Criteria c = session.createCriteria(User.class); 
 
List&lt;User&gt; userList = c.list(); 
 
<span class="keyword">for</span>(User user:userList){ 
  System.out.println(user.getUserName()); 
} 
 
session.getTransaction().commit(); 
```  
``` java where 
session.beginTransaction(); 
 
Criteria c = session.createCriteria(User.class); 
 
c.add(Restrictions.eq(<span class="string">"userName"</span>, <span class="string">"James"</span>)); 
 
List&lt;User&gt; userList = c.list(); 
<span class="keyword">for</span>(User user:userList){ 
  System.out.println(user.getUserName()); 
} 
session.getTransaction().commit();
```  
``` xml Restrictions对象
方法名称  				对应SQL中的表达式
---------------------------------------------------------- 
Restrictions.eq  		field = value 
Restrictions.gt  		field &gt; value 
Restrictions.lt  		field &lt; value 
Restrictions.ge  	field &gt;= value
Restrictions.le  		field &lt;= value 
Restrictions.between  	field between value1 and value2 
Restrictions.in  		field in(…) 
Restrictions.and  	and 
Restrictions.or  		or 
Restrictions.like  	field like value
```
``` java 示例 
Criteria c = session.createCriteria(User.class); 
 
c.add(Restrictions.like(<span class="string">"userName"</span>, <span class="string">"J"</span>)); 
c.add(Restrictions.eq(<span class="string">"id"</span>, <span class="number">120</span>));
c.add(Restrictions.or(Restrictions.eq(<span class="string">"userName"</span>, <span class="string">"James"</span>),  
  Restrictions.eq(<span class="string">"userName"</span>, <span class="string">"Alex"</span>)));
```
``` java 获取唯一记录
session.beginTransaction(); 
 
Criteria c = session.createCriteria(User.class); 
c.add(Restrictions.eq(<span class="string">"id"</span>, <span class="number">120</span>)); 
 
User user = (User) c.uniqueResult(); 
 
System.out.println(user.getUserName()); 
 
session.getTransaction().commit(); 
``` 
``` java 分页 
Criteria c = session.createCriteria(User.class); 
 
c.setFirstResult(<span class="number">0</span>); 
c.setMaxResults(<span class="number">5</span>);
```  
``` java 分组与统计 
session.beginTransaction(); 
 
Criteria c = session.createCriteria(User.class); 
 
c.setProjection(Projections.sum(<span class="string">"id"</span>)); 
 
Object obj = c.uniqueResult(); 
System.out.println(obj); 
 
session.getTransaction().commit();
```
``` xml Projections对象
方法名称  						描述 
-------------------------------------------------------
Projections.sum  			等于SQL中聚合函数sum 
Projections.avg  			等于SQL中聚合函数avg 
Projections.count  		等于SQL中聚合函数count 
Projections .distinct  	去除重复记录 
Projections.max  			等于SQL中聚合函数max 
Projections.min  			等于SQL中聚合函数min 
Projections .groupProperty  对指定的属性进行分组查询 
```  
``` java 多个统计与分组 
session.beginTransaction(); 
 
Criteria c = session.createCriteria(User.class); 
 
ProjectionList projectionList = Projections.projectionList(); 
projectionList.add(Projections.sum(<span class="string">"id"</span>)); 
projectionList.add(Projections.min(<span class="string">"id"</span>)); 
 
c.setProjection(projectionList); 
<span class="comment">// 和HQL一样，单列用Object，多列用Object[] </span>
Object[] obj = (Object[]) c.uniqueResult(); 
 
System.out.println(<span class="string">"sum:"</span> + obj[<span class="number">0</span>]); 
System.out.println(<span class="string">"min:"</span> + obj[<span class="number">1</span>]);
```  
``` java 排序 
Criteria c = session.createCriteria(User.class); 
 
c.addOrder(Order.desc(<span class="string">"id"</span>)); 
```

**原生SQL查询**  

``` java 示例
session.beginTransaction(); 
 
String sql = <span class="string">"select id,username,userpwd from t_user"</span>; 
List list = session.createSQLQuery(sql).list(); 
 
<span class="keyword">for</span>(Object item : list){ 
	Object[] rows = (Object[]) item; 
	System.out.println(<span class="string">"id:"</span> + rows[<span class="number">0</span>] + <span class="string">"username:"</span>  
	  + rows[<span class="number">1</span>] + <span class="string">"userpwd:"</span> + rows[<span class="number">2</span>]); 
} 
 
session.getTransaction().commit(); 
```  
``` java addEntity()示例 
session.beginTransaction(); 
 
String sql = <span class="string">"select id,username,userpwd from t_user"</span>; 

<span class="comment">// addEntity()可以告诉Hibernate你想要封装成对象的类型，然后自动为你封装</span>
SQLQuery query = session.createSQLQuery(sql).addEntity(User.class); 
 
List&lt;User&gt; list = query.list(); 
 
<span class="keyword">for</span>(User user : list){ 
  System.out.println(user.getUserName()); 
} 
 
session.getTransaction().commit();
```  
``` java uniqueResult示例 
session.beginTransaction(); 
 
String sql = <span class="string">"select id,username,userpwd from t_user where id = 2"</span>; 
SQLQuery query = session.createSQLQuery(sql).addEntity(User.class); 
 
User user = (User) query.uniqueResult(); 
 
System.out.println(user.getUserName()); 
 
session.getTransaction().commit();
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2010-08-01T08:11:00.000Z"><a href="/2010/08/01/2012-06-19-hibernate-2/">Aug 1st, 2010</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2010/08/01/2012-06-19-hibernate-2/">hibernate持久化对象的生命周期(状态)</a></h1>
  

    </header>
    <div class="entry">
      
        <p>包括三种状态：瞬态（自由态），持久态，托管态  </p>
<p><strong>自由态</strong>  </p>
<p>持久化对象的自由态，指的是对象在内存中存在，但是在数据库中并没有数据与其关联。比如Student student = new Student()，这里的student对象就是一个自由态的持久化对象。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft readMore">
            <a href="/2010/08/01/2012-06-19-hibernate-2/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  <article class="post">
  
  <div class="post-content">
    <header>
      
        <!-- <div class="icon"></div> -->
        <time class="index-post-time" datetime="2010-07-28T13:25:00.000Z"><a href="/2010/07/28/2012-06-18-hibernate-1/">Jul 28th, 2010</a></time>
      
        <div class="post-tags">
          
        </div>
      
  
    <h1 class="title"><a href="/2010/07/28/2012-06-18-hibernate-1/">hibernate配置与入门</a></h1>
  

    </header>
    <div class="entry">
      
        <p><strong>ORM</strong>  </p>
<p>ORM(Object Relation Mapping)对象关系映射。是一种为了解决面向对象与关系数据库存在的互不匹配的现象的技术。简单的说，ORM是通过使用描述对象和数据库之间映射的元数据，将java程序中的对象自动持久化到关系数据库中。本质上就是将数据从一种形式转换到另外一种形式。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft readMore">
            <a href="/2010/07/28/2012-06-18-hibernate-1/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




<nav id="pagination">
  
    <a href="/page/2/" class="alignleft prev">Prev</a>
  
  
    <a href="/page/4/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <!-- <aside id="sidebar" class="alignright"></aside> -->
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div>
  
  Copyright &copy; 2013 hussion
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'hancy';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox({
  	'titleShow': false,
    'transitionIn': 'elastic',
    'transitionOut': 'elastic',
    'easingIn': 'easeOutBack',
    'easingOut': 'easeInBack'
  });
})(jQuery);
</script>

</body>
</html>